(function(){"use strict";var e={3023:function(e,t,s){var r=s(7195),a=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("div",{staticClass:"navbar-text navbar-nav m-3 sidebar shadow p-4"},[t("router-link",{staticClass:"text-decoration-none",attrs:{to:"/"}},[t("i",{staticClass:"fas fa-home"}),e._v(" Home")]),t("br"),t("router-link",{staticClass:"text-decoration-none",attrs:{to:"/coverage"}},[t("i",{staticClass:"fas fa-caret-right"}),e._v(" Coverage Overview")])],1),t("div",{staticClass:"content"},[t("router-view")],1)])},o=[],n={name:"App"},l=n,i=s(1001),c=(0,i.Z)(l,a,o,!1,null,null,null),d=c.exports,u=s(2241),p=function(){var e=this;e._self._c;return e._m(0)},h=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"login-container"},[t("h1",[e._v("Rightcharge Coding Test")]),t("p",[e._v("Create a Coverage Overview tool")]),t("p",[e._v("Purpose: Create a dynamic “Coverage Overview” map that allows the user to view the parts of the UK that are covered by the installers in our network. The user should also be able to select any combination of chargers, installers, or areas (postcode and range combinations) to narrow down the results. ")]),t("p",[e._v("If you can't build the project or run into any issues where you cannot continue please reach out to me by email before wasting hours and I'll help you along.")])])}],g={},m=(0,i.Z)(g,p,h,!1,null,"b84cfa90",null),f=m.exports,v=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container-fluid"},[t("div",{staticClass:"form-control"},[e._m(0),t("div",{staticClass:"row form-comtrol mx-xxl-auto shadow m-4 pb-4 pt-3 container"},[e._m(1),t("div",{staticClass:"col"},[t("label",{attrs:{for:"chargers"}},[e._v("Chargers:")]),t("div",{staticClass:"dropdown d-xl-inline-grid m-lg-4 w-75"},[t("button",{staticClass:"btn btn-secondary dropdown-toggle",attrs:{type:"button",id:"chargersDropdown","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[e._v(" "+e._s(e.selectedChargers.length?e.selectedChargersText:"Select Charger")+" ")]),t("div",{staticClass:"dropdown-menu w-100 text-center",attrs:{"aria-labelledby":"chargersDropdown"}},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedChargers,expression:"selectedChargers"}],staticClass:"dropdown-item text-uppercase pb-5",attrs:{multiple:""},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedChargers=t.target.multiple?s:s[0]}}},e._l(e.chargerOptions,(function(s){return t("option",{key:s,staticClass:"p-2",domProps:{value:s}},[e._v(" "+e._s(s)+" ")])})),0)])])]),t("div",{staticClass:"col"},[t("label",{attrs:{for:"installers"}},[e._v("Installers:")]),t("div",{staticClass:"dropdown d-xl-inline-grid m-lg-4 w-75"},[t("button",{staticClass:"btn btn-secondary dropdown-toggle",attrs:{type:"button",id:"installersDropdown","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",value:e.selectedInstallers.length?e.selectedInstallersText:"Select Installers"}},[e._v(" "+e._s(e.selectedInstallers.length?e.selectedInstallersText:"Select Installers")+" ")]),t("div",{staticClass:"dropdown-menu w-100 text-center",attrs:{"aria-labelledby":"installersDropdown"}},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedInstallers,expression:"selectedInstallers"}],staticClass:"dropdown-item text-uppercase pb-5",attrs:{multiple:""},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedInstallers=t.target.multiple?s:s[0]}}},e._l(e.installerOptions,(function(s,r){return t("option",{key:r,staticClass:"p-2",domProps:{value:r}},[e._v(" "+e._s(s)+" ")])})),0)])])])]),t("div",{staticClass:"row p-4 mt-2"},[t("div",{staticClass:"col shadow mx-sm-3 input-group form-control"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.postcode,expression:"postcode"}],staticClass:"form-control",attrs:{type:"text",id:"postcode",placeholder:"Enter postcode"},domProps:{value:e.postcode},on:{input:function(t){t.target.composing||(e.postcode=t.target.value)}}}),e._m(2)]),t("div",{staticClass:"col shadow mx-sm-3 input-group form-control"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.radius,expression:"radius"}],staticClass:"form-control",attrs:{type:"number",placeholder:"Radius (in miles)"},domProps:{value:e.radius},on:{input:function(t){t.target.composing||(e.radius=t.target.value)}}}),e._m(3)]),t("button",{staticClass:"col-xxl-1 btn btn-outline-danger",on:{click:function(t){return e.clearFilter()}}},[e._v("Clear Filter")])]),t("div",{staticClass:"p-2 shadow-lg"},[t("gmap-map",{staticStyle:{width:"100%",height:"600px"},attrs:{center:e.mapCenter,zoom:e.mapZoom}},e._l(e.markers,(function(s,r){return t("gmap-marker",{key:r,attrs:{position:e.getPosition(s.position)}},[t("GmapInfoWindow",{attrs:{options:{maxWidth:200}}},[t("div",{staticClass:"p-2"},[t("h6",{staticClass:"text-uppercase"},[e._v(e._s(s.installerName))]),t("p",{staticClass:"fw-medium m-0"},[e._v("On going Installation")]),t("ul",{staticClass:"installation-list"},e._l(s.chargers,(function(s){return t("li",{key:s},[e._v(e._s(s))])})),0),t("p",{staticClass:"text-danger fw-bold"},[e._v("Pending: "+e._s(e.getCapacity(s.chargers)))])])])],1)})),1)],1)])])},C=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"form-control shadow p-3"},[t("h1",[e._v("Coverage Overview")])])},function(){var e=this,t=e._self._c;return t("h4",[e._v("Filters "),t("i",{staticClass:"fas fa-filter"})])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"input-group-append"},[t("span",{staticClass:"input-group-text"},[t("i",{staticClass:"fas fa-street-view"})])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"input-group-append"},[t("span",{staticClass:"input-group-text"},[t("i",{staticClass:"fas fa-map-marker-alt"})])])}],w=(s(7658),JSON.parse('{"S":{"L":[{"installer1":{"postcode":[{"code":"SW1A 1AA","radius":40}],"chargers":["Easee One","Ohme Home Pro","Indra Smart Pro"]}},{"installer2":{"postcode":[{"code":"SW1A 1AB","radius":30},{"code":"EC1A 1BB","radius":40},{"code":"SW1A 1BB","radius":50}],"chargers":["Mini Pro3","Ohme Epod","Zappi 2.1","Wallbox Pulsar Plus"]}},{"installer3":{"postcode":[{"code":"W1A 1HQ","radius":30},{"code":"W1A 3AE","radius":60},{"code":"W1A 3AA","radius":50}],"chargers":["Easee One","Indra Smart Pro","Zappi 2.1"]}},{"installer4":{"postcode":[{"code":"NW1W 6AA","radius":30},{"code":"NW1W 6AB","radius":60},{"code":"NW1W 6AG","radius":50}],"chargers":["Mini Pro3","Ohme Epod","Wallbox Pulsar Plus"]}},{"installer5":{"postcode":[{"code":"SE1 9GF","radius":80}],"chargers":["Easee One","Indra Smart Pro","Zappi 2.1","Wallbox Pulsar Plus"]}},{"installer6":{"postcode":[{"code":"SW1V 2SA","radius":80}],"chargers":["Mini Pro3","Ohme Home Pro","Indra Smart Pro","Zappi 2.1"]}},{"installer7":{"postcode":[{"code":"EC2A 4BX","radius":100}],"chargers":["Easee One","Ohme Home Pro","Wallbox Pulsar Plus"]}},{"installer8":{"postcode":[{"code":"W1G 9RJ","radius":150}],"chargers":["Mini Pro3","Indra Smart Pro","Zappi 2.1"]}},{"installer9":{"postcode":[{"code":"NW1 4RY","radius":150}],"chargers":["Easee One","Ohme Epod","Zappi 2.1","Wallbox Pulsar Plus"]}},{"installer10":{"postcode":[{"code":"SE1 7PB","radius":150}],"chargers":["Mini Pro3","Ohme Home Pro","Indra Smart Pro"]}}]}}')),b={data(){return{selectedChargers:[],selectedInstallers:[],postcode:"",radius:"",markers:[],chargerOptions:["Mini Pro3","Easee One","Ohme Home Pro","Ohme Epod","Indra Smart Pro","Zappi 2.1","Wallbox Pulsar Plus"],installerOptions:[],installers:[],mapCenter:{lat:51.5074,lng:-.1278},mapZoom:10,infoWindowPosition:null,infoWindowOpened:!1,infoWindowTitle:"",infoWindowChargers:[]}},mounted(){this.populateInstallerOptions()},computed:{selectedChargersText(){return this.selectedChargers.join(", ")},selectedInstallersText(){return this.selectedInstallers.map((e=>this.installerOptions[e])).join(", ")}},methods:{getCapacity(e){const t=3,s=e.length-t;return s.toString()},handleFilterInstallers(){this.filterInstallers()},populateInstallerOptions(){const e=w.S.L;this.installerOptions=e.map((e=>Object.keys(e)[0]))},async filterInstallers(){const e=w.S.L,t=[];if(0!==this.selectedInstallers.length||0!==this.selectedChargers.length||""!==this.postcode||""!==this.radius){for(const s of e){const e=Object.keys(s)[0],r=s[e],a=this.selectedChargers,o=this.postcode,n=this.radius,l=""===o,i=""===n;this.markers=[];const c=this.selectedInstallers.map((e=>this.installerOptions[e])),d=0===a.length||a.every((e=>r.chargers.includes(e))),u=0===c.length||c.includes(e);if(u&&d&&l&&i){const a=await this.getInstallerCoordinates(s);a.length>0&&a.forEach((s=>{t.push({position:{lat:s.lat,lng:s.lng},installerName:e,chargers:r.chargers})}))}else if(""!==o){const s=r.postcode.find((e=>e.code===o));if(s){const s=await this.geocodePostcode(o);s&&s.lat&&s.lng&&t.push({position:{lat:s.lat,lng:s.lng},installerName:e,chargers:r.chargers})}}else if(null!=n){const s=r.postcode.find((e=>e.radius==n)),a=r.postcode[0].code;if(s){const s=await this.geocodePostcode(a);s&&s.lat&&s.lng&&t.push({position:{lat:s.lat,lng:s.lng},installerName:e,chargers:r.chargers})}}}this.markers=t}else this.markers=t},async getInstallerCoordinates(e){const t=Object.values(e)[0].postcode,s=[];if(Array.isArray(t))for(const a of t){const e=a.code;try{const t=await this.geocodePostcode(e);t&&t.lat&&t.lng&&s.push({lat:t.lat,lng:t.lng})}catch(r){console.error("Error getting installer coordinates:",r)}}else if("string"===typeof t){const e=t;try{const t=this.geocodePostcode(e);t&&t.lat&&t.lng&&s.push({lat:t.lat,lng:t.lng})}catch(r){console.error("Error getting installer coordinates:",r)}}return s},async geocodePostcode(e){const t="AIzaSyABDC0dUVtV6uOZjepOYjTd2eKdr4FwtDo",s=`https://maps.googleapis.com/maps/api/geocode/json?address=${e}&key=${t}`;try{const e=await fetch(s),t=await e.json();if("OK"===t.status){const{lat:e,lng:s}=t.results[0].geometry.location;return{lat:e,lng:s}}throw new Error("Unable to geocode postcode")}catch(r){console.error("Error geocoding postcode:",r)}},getPosition(e){return Array.isArray(e)?e.map((e=>({lat:Number(e.lat),lng:Number(e.lng)}))):e?{lat:Number(e.lat),lng:Number(e.lng)}:null},clearFilter(){this.selectedInstallers=[],this.postcode="",this.radius="",this.selectedChargers=[],this.markers=[],this.infoWindowOpened=!1,this.filterInstallers()}},watch:{selectedInstallers:{deep:!0,handler:"handleFilterInstallers"},selectedChargers:{deep:!0,handler:"handleFilterInstallers"},postcode:{deep:!0,handler:"handleFilterInstallers"},radius:{deep:!0,handler:"handleFilterInstallers"}}},y=b,_=(0,i.Z)(y,v,C,!1,null,null,null),O=_.exports;r.ZP.use(u.Z);const P=new u.Z({routes:[{path:"/",name:"LoginForm",component:f},{path:"/coverage",name:"CoverageOverview",component:O}],mode:"history"});var x=P,I=(s(4894),s(1622));r.ZP.use(I,{load:{key:"AIzaSyABDC0dUVtV6uOZjepOYjTd2eKdr4FwtDo"}}),new r.ZP({router:x,render:e=>e(d)}).$mount("#app")}},t={};function s(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,s),o.exports}s.m=e,function(){var e=[];s.O=function(t,r,a,o){if(!r){var n=1/0;for(d=0;d<e.length;d++){r=e[d][0],a=e[d][1],o=e[d][2];for(var l=!0,i=0;i<r.length;i++)(!1&o||n>=o)&&Object.keys(s.O).every((function(e){return s.O[e](r[i])}))?r.splice(i--,1):(l=!1,o<n&&(n=o));if(l){e.splice(d--,1);var c=a();void 0!==c&&(t=c)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[r,a,o]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,r){var a,o,n=r[0],l=r[1],i=r[2],c=0;if(n.some((function(t){return 0!==e[t]}))){for(a in l)s.o(l,a)&&(s.m[a]=l[a]);if(i)var d=i(s)}for(t&&t(r);c<n.length;c++)o=n[c],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(d)},r=self["webpackChunkcoverage_map"]=self["webpackChunkcoverage_map"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=s.O(void 0,[998],(function(){return s(3023)}));r=s.O(r)})();
//# sourceMappingURL=app.d89b2ce5.js.map